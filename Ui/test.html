<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Floor Heating ‚Ä¢ Dashboard</title>

    <style>
      :root {
        --w: 1050px;
        --h: 627px;

        --bg0: #070a0e;
        --bg1: #0a1018;

        --card: rgba(255, 255, 255, 0.06);
        --card2: rgba(255, 255, 255, 0.045);
        --stroke: rgba(255, 255, 255, 0.1);
        --stroke2: rgba(255, 255, 255, 0.16);

        --txt: rgba(235, 245, 255, 0.92);
        --muted: rgba(235, 245, 255, 0.62);

        --ok: rgba(0, 255, 174, 0.95);
        --warn: rgba(247, 209, 74, 0.95);
        --err: rgba(255, 80, 80, 0.92);

        --rad: 18px;
        --rad2: 22px;

        --gap: 12px;
        --pad: 14px;

        --shadow: 0 18px 40px rgba(0, 0, 0, 0.48);
        --glow:
          0 0 0 1px rgba(255, 255, 255, 0.05), 0 16px 40px rgba(0, 0, 0, 0.55);
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        display: grid;
        place-items: center;
        color: var(--txt);
        font-family:
          ui-sans-serif,
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Helvetica,
          Arial,
          "Apple Color Emoji",
          "Segoe UI Emoji";
        background:
          radial-gradient(
            1200px 700px at 15% 15%,
            rgba(0, 255, 174, 0.1),
            transparent 55%
          ),
          radial-gradient(
            900px 600px at 85% 20%,
            rgba(247, 209, 74, 0.08),
            transparent 55%
          ),
          radial-gradient(
            900px 600px at 80% 85%,
            rgba(255, 80, 80, 0.08),
            transparent 55%
          ),
          linear-gradient(180deg, var(--bg0), var(--bg1));
        overflow: hidden;
      }

      /* Fixed canvas */
      .frame {
        width: var(--w);
        height: var(--h);
        padding: var(--pad);
        border-radius: var(--rad2);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.04),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: var(--shadow);
        overflow: hidden; /* <- guarantee fits inside 1050x627 */
        position: relative;
      }

      /* Dashboard grid (fits exactly within frame padding) */
      .dash {
        height: 100%;
        display: grid;
        grid-template-columns: 610px 400px;
        grid-template-rows: 320px 267px; /* 320 + 267 + 12 gap = 599 inner height */
        gap: var(--gap);
      }

      .card {
        height: 100%;
        border-radius: var(--rad2);
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.07),
          rgba(255, 255, 255, 0.04)
        );
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: var(--glow);
        overflow: hidden;
        position: relative;
      }

      .card::before {
        content: "";
        position: absolute;
        inset: -40px;
        background:
          radial-gradient(
            600px 240px at 18% 12%,
            rgba(0, 255, 174, 0.12),
            transparent 60%
          ),
          radial-gradient(
            520px 220px at 82% 18%,
            rgba(247, 209, 74, 0.1),
            transparent 60%
          );
        opacity: 0.55;
        pointer-events: none;
      }

      .card-inner {
        position: relative;
        height: 100%;
        padding: 14px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding-bottom: 6px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }

      .title {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 0;
      }

      .ico {
        width: 20px;
        height: 20px;
        opacity: 0.9;
        flex: 0 0 auto;
      }

      h3 {
        margin: 0;
        font-size: 14px;
        letter-spacing: 0.2px;
      }
      .subtitle {
        margin-top: 2px;
        font-size: 11px;
        color: var(--muted);
      }

      /* -----------------------
         TOP-LEFT: CLOCK + SYSTEM
      ------------------------ */
      .overview {
        display: grid;
        grid-template-columns: 220px 1fr;
        gap: 12px;
        height: calc(100% - 44px); /* minus header area */
      }

      .clockPanel {
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--rad);
        padding: 12px;
        display: grid;
        grid-template-rows: 1fr auto;
        gap: 10px;
        overflow: hidden;
      }

      .dialWrap {
        display: grid;
        place-items: center;
        padding-top: 0;
        min-height: 0;
      }
      .dial {
        width: 132px;
        height: 132px;
        filter: drop-shadow(0 10px 18px rgba(0, 0, 0, 0.45));
      }
      .clockText {
        margin-top: 0;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        padding-top: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .dow {
        font-size: 12px;
        color: var(--muted);
        line-height: 1.2;
      }
      .date {
        font-size: 12px;
        color: var(--muted);
        margin-top: 2px;
        line-height: 1.2;
      }
      .time {
        margin-top: 6px;
        font-size: 26px;
        font-weight: 700;
        letter-spacing: 0.6px;
      }

      .systemPanel {
        display: grid;
        grid-template-rows: 1fr auto;
        gap: 12px;
        height: 100%;
      }

      .sysBox {
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--rad);
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        overflow: hidden;
      }

      .sysTop {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }
      .sysK {
        font-size: 11px;
        letter-spacing: 0.14em;
        color: var(--muted);
      }
      .sysWave {
        color: rgba(0, 255, 174, 0.65);
        opacity: 0.95;
      }

      .pills {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 8px;
      }
      .pill {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        height: 34px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.08);
        font-size: 12px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .led {
        width: 9px;
        height: 9px;
        border-radius: 99px;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.05);
      }
      .led.ok {
        background: var(--ok);
        box-shadow:
          0 0 0 3px rgba(0, 255, 174, 0.12),
          0 0 14px rgba(0, 255, 174, 0.35);
      }
      .led.warn {
        background: var(--warn);
        box-shadow:
          0 0 0 3px rgba(247, 209, 74, 0.12),
          0 0 14px rgba(247, 209, 74, 0.35);
      }
      .led.err {
        background: var(--err);
        box-shadow:
          0 0 0 3px rgba(255, 80, 80, 0.12),
          0 0 14px rgba(255, 80, 80, 0.35);
      }

      .toggleRow {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding-top: 6px;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
      }
      .toggleRight {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .tagMini {
        height: 28px;
        padding: 0 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 999px;
        font-weight: 700;
        letter-spacing: 0.08em;
        font-size: 11px;
        background: rgba(0, 255, 174, 0.1);
        border: 1px solid rgba(0, 255, 174, 0.2);
        color: rgba(0, 255, 174, 0.92);
      }

      /* Switch */
      .switch {
        position: relative;
        width: 54px;
        height: 30px;
        display: inline-block;
      }
      .switch input {
        display: none;
      }
      .slider {
        position: absolute;
        inset: 0;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.12);
        transition: 0.18s ease;
      }
      .slider::after {
        content: "";
        position: absolute;
        width: 22px;
        height: 22px;
        border-radius: 999px;
        left: 4px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.85);
        box-shadow: 0 8px 14px rgba(0, 0, 0, 0.35);
        transition: 0.18s ease;
      }
      .switch input:checked + .slider {
        background: rgba(0, 255, 174, 0.18);
        border-color: rgba(0, 255, 174, 0.26);
      }
      .switch input:checked + .slider::after {
        left: 28px;
        background: rgba(0, 255, 174, 0.92);
      }

      /* -----------------------
         TOP-RIGHT: NOTIFICATIONS
      ------------------------ */
      .noticeList {
        flex: 1 1 auto;
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--rad);
        padding: 10px;
        overflow: auto; /* stays inside the card */
      }
      .noticeList::-webkit-scrollbar {
        width: 10px;
      }
      .noticeList::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 999px;
        border: 2px solid rgba(0, 0, 0, 0.25);
      }

      .notice {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 12px;
        padding: 10px;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.08);
        margin-bottom: 8px;
      }
      .notice:last-child {
        margin-bottom: 0;
      }
      .notice .t {
        font-weight: 700;
        font-size: 12px;
      }
      .notice .d {
        margin-top: 3px;
        font-size: 11px;
        color: var(--muted);
        line-height: 1.25;
      }

      .tag {
        padding: 6px 10px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 800;
        letter-spacing: 0.06em;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.05);
        align-self: flex-start;
        min-width: 62px;
        text-align: center;
      }
      .tag.ok {
        color: rgba(0, 255, 174, 0.92);
        border-color: rgba(0, 255, 174, 0.22);
        background: rgba(0, 255, 174, 0.1);
      }
      .tag.warn {
        color: rgba(247, 209, 74, 0.95);
        border-color: rgba(247, 209, 74, 0.22);
        background: rgba(247, 209, 74, 0.1);
      }
      .tag.err {
        color: rgba(255, 80, 80, 0.92);
        border-color: rgba(255, 80, 80, 0.22);
        background: rgba(255, 80, 80, 0.1);
      }

      .actionsRow {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 10px;
      }
      .btn {
        height: 40px;
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: var(--txt);
        font-weight: 700;
        font-size: 12px;
        letter-spacing: 0.2px;
        cursor: pointer;
        transition:
          transform 0.12s ease,
          background 0.12s ease,
          border-color 0.12s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        user-select: none;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn:hover {
        background: rgba(255, 255, 255, 0.09);
        border-color: rgba(255, 255, 255, 0.18);
      }

      .btn.primary {
        background: rgba(0, 255, 174, 0.12);
        border-color: rgba(0, 255, 174, 0.22);
      }
      .btn.primary:hover {
        background: rgba(0, 255, 174, 0.16);
      }

      .btn.warn {
        background: rgba(247, 209, 74, 0.12);
        border-color: rgba(247, 209, 74, 0.22);
      }
      .btn.warn:hover {
        background: rgba(247, 209, 74, 0.16);
      }

      /* -----------------------
         BOTTOM-LEFT: ELECTRICAL
      ------------------------ */
      .gaugeRow {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
        height: calc(100% - 44px);
      }

      .gauge {
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--rad);
        padding: 12px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        overflow: hidden;
      }
      .gTop {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 10px;
      }
      .gTop b {
        font-size: 12px;
      }
      .mini {
        font-size: 11px;
        color: var(--muted);
      }

      .ringWrap {
        flex: 1 1 auto;
        display: grid;
        place-items: center;
        position: relative;
        padding: 4px 0;
      }
      .ringSvg {
        width: 128px;
        height: 128px;
        filter: drop-shadow(0 10px 16px rgba(0, 0, 0, 0.42));
      }
      .ringSvg .base {
        stroke: rgba(255, 255, 255, 0.1);
      }
      .ringSvg .arc {
        stroke: var(--ok);
        transition: stroke-dashoffset 0.45s ease;
      }

      .ringSvg .rot {
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
      }

      .gVal {
        position: absolute;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 2px;
        text-align: center;
      }
      .num {
        font-size: 22px;
        font-weight: 800;
        letter-spacing: 0.2px;
      }
      .unit {
        font-size: 11px;
        color: var(--muted);
      }

      .foot {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 11px;
        color: var(--muted);
        padding-top: 6px;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
      }
      .tinyDot {
        width: 7px;
        height: 7px;
        border-radius: 99px;
        background: rgba(0, 255, 174, 0.9);
        box-shadow: 0 0 14px rgba(0, 255, 174, 0.35);
      }

      /* -----------------------
         BOTTOM-RIGHT: THERMALS
      ------------------------ */
      .thermGrid {
        height: calc(100% - 44px);
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        grid-auto-rows: min-content;
        gap: 12px;
        align-content: start;
        overflow: auto;
        padding-right: 8px;
      }

      .thermGrid::-webkit-scrollbar {
        width: 10px;
      }

      .thermGrid::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 999px;
        margin: 10px 0;
      }

      .thermGrid::-webkit-scrollbar-thumb {
        background: rgba(0, 255, 174, 0.18);
        border-radius: 999px;
        border: 2px solid rgba(0, 0, 0, 0.2);
      }

      .thermGrid::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 255, 174, 0.28);
      }
      .therm {
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: var(--rad);
        padding: 12px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 6px;
        text-align: center;
      }
      .tRing {
        width: 96px;
        height: 96px;
        position: relative;
        display: grid;
        place-items: center;
        filter: drop-shadow(0 10px 16px rgba(0, 0, 0, 0.42));
      }
      .tRing svg {
        width: 96px;
        height: 96px;
      }
      .tRing .rot {
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
      }
      .tRing .base {
        stroke: rgba(255, 255, 255, 0.1);
      }
      .tRing .arc {
        stroke: var(--err);
        transition:
          stroke-dashoffset 0.45s ease,
          opacity 0.2s ease;
      }
      .tDot {
        position: absolute;
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: rgba(255, 80, 80, 0.92);
        box-shadow: 0 0 16px rgba(255, 80, 80, 0.35);
        opacity: 0.9;
      }
      .tval {
        font-size: 16px;
        font-weight: 800;
      }
      .label {
        font-size: 11px;
        color: var(--muted);
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .ringSvg .arc,
        .tRing .arc {
          transition: none;
        }
        .btn {
          transition: none;
        }
      }
    </style>
  </head>

  <body>
    <div class="frame">
      <main class="dash">
        <!-- TOP-LEFT: CLOCK + SYSTEM -->
        <section class="card" aria-label="Clock and system">
          <div class="card-inner">
            <div class="head">
              <div class="title">
                <svg
                  class="ico"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                  style="color: var(--warn)"
                >
                  <circle cx="12" cy="12" r="9"></circle>
                  <path d="M12 7v6l4 2"></path>
                </svg>
                <div>
                  <h3>Overview</h3>
                  <div class="subtitle">Clock + system state</div>
                </div>
              </div>
            </div>

            <div class="overview">
              <!-- Clock -->
              <div class="clockPanel">
                <div class="dialWrap" aria-hidden="true">
                  <svg class="dial" viewBox="0 0 120 120">
                    <defs>
                      <filter
                        id="cg2"
                        x="-30%"
                        y="-30%"
                        width="160%"
                        height="160%"
                      >
                        <feGaussianBlur
                          stdDeviation="1.8"
                          result="b"
                        ></feGaussianBlur>
                        <feComponentTransfer in="b">
                          <feFuncA type="linear" slope="0.35"></feFuncA>
                        </feComponentTransfer>
                        <feMerge>
                          <feMergeNode />
                          <feMergeNode in="SourceGraphic" />
                        </feMerge>
                      </filter>
                    </defs>

                    <g
                      filter="url(#cg2)"
                      fill="none"
                      stroke="rgba(0,255,174,.55)"
                      stroke-width="3"
                      stroke-linecap="round"
                    >
                      <circle cx="60" cy="60" r="42" opacity=".30"></circle>
                      <path d="M60 18v10" />
                      <path d="M60 92v10" />
                      <path d="M18 60h10" />
                      <path d="M92 60h10" />
                      <path d="M30 30l7 7" opacity=".7" />
                      <path d="M83 83l7 7" opacity=".7" />
                      <path d="M90 30l-7 7" opacity=".7" />
                      <path d="M37 83l-7 7" opacity=".7" />
                    </g>

                    <g stroke-linecap="round">
                      <path
                        id="hHand"
                        d="M60 60 L43 52"
                        stroke="rgba(233,254,247,.92)"
                        stroke-width="4"
                      />
                      <path
                        id="mHand"
                        d="M60 60 L60 34"
                        stroke="rgba(233,254,247,.92)"
                        stroke-width="3"
                      />
                      <path
                        id="sHand"
                        d="M60 60 L78 70"
                        stroke="rgba(247,209,74,.92)"
                        stroke-width="2.2"
                      />
                      <circle
                        cx="60"
                        cy="60"
                        r="3"
                        fill="rgba(233,254,247,.92)"
                      />
                    </g>
                  </svg>
                </div>

                <div class="clockText">
                  <div class="dow" id="dow">‚Äî</div>
                  <div class="date" id="date">‚Äî</div>
                  <div class="time" id="time">‚Äî</div>
                </div>
              </div>

              <!-- System -->
              <div class="systemPanel">
                <div class="sysBox" aria-label="System status">
                  <div class="sysTop">
                    <div class="sysK">SYSTEM</div>
                    <svg
                      class="sysWave"
                      viewBox="0 0 64 24"
                      width="64"
                      height="24"
                      aria-hidden="true"
                    >
                      <path
                        d="M2 12h12l6-8 8 16 8-12 6 4h14"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2.2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </div>

                  <div class="pills">
                    <div class="pill">
                      <span class="led ok" id="ledReady"></span
                      ><span id="readyTxt">Ready</span>
                    </div>
                    <div class="pill">
                      <span class="led err" id="ledMode"></span
                      ><span id="modeTxt">Off</span>
                    </div>
                    <div class="pill">
                      <span class="led warn" id="ledCal"></span
                      ><span id="calTxt">Cal Pending</span>
                    </div>
                  </div>

                  <div class="toggleRow">
                    <div class="sysK">LED FEEDBACK</div>
                    <div class="toggleRight">
                      <div class="tagMini">LT</div>
                      <label class="switch" aria-label="LED feedback">
                        <input id="ledFeedback" type="checkbox" checked />
                        <span class="slider"></span>
                      </label>
                    </div>
                  </div>
                </div>

                <!-- Optional space for future: quick KPIs / run mode buttons -->
                <div style="height: 0"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- TOP-RIGHT: SYSTEM NOTIFICATIONS -->
        <section class="card" aria-label="System notifications">
          <div class="card-inner">
            <div class="head">
              <div class="title">
                <svg
                  class="ico"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                >
                  <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2z"></path>
                  <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2z"></path>
                </svg>
                <div>
                  <h3>System</h3>
                  <div class="subtitle">Notifications + quick actions</div>
                </div>
              </div>
            </div>

            <div
              class="noticeList"
              id="noticeList"
              aria-label="Notification list"
            >
              <!-- injected -->
            </div>

            <div class="actionsRow">
              <button class="btn primary" type="button" id="btnOpenSetup">
                <span aria-hidden="true">‚öôÔ∏è</span>Setup
              </button>
              <button class="btn warn" type="button" id="btnCalibration">
                <span aria-hidden="true">üß™</span>Calibrate
              </button>
              <button class="btn" type="button" id="btnLogs">
                <span aria-hidden="true">üìÑ</span>Logs
              </button>
            </div>
          </div>
        </section>

        <!-- BOTTOM-LEFT: ELECTRICAL -->
        <section class="card" aria-label="Electrical">
          <div class="card-inner">
            <div class="head">
              <div class="title">
                <svg
                  class="ico"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                >
                  <path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z"></path>
                </svg>
                <div>
                  <h3>Electrical</h3>
                  <div class="subtitle">Voltage, current, capacitance</div>
                </div>
              </div>
            </div>

            <div class="gaugeRow">
              <!-- Voltage -->
              <div class="gauge">
                <div class="gTop">
                  <b>Voltage</b><span class="mini">0‚Äì325V</span>
                </div>
                <div class="ringWrap">
                  <svg class="ringSvg" viewBox="0 0 100 100" aria-hidden="true">
                    <circle
                      class="base rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                    ></circle>
                    <circle
                      id="vArc"
                      class="arc rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                      stroke-linecap="round"
                      stroke-dasharray="239"
                      stroke-dashoffset="239"
                    ></circle>
                  </svg>
                  <div class="gVal">
                    <div class="num" id="vNum">0.00</div>
                    <div class="unit">V</div>
                  </div>
                </div>
                <div class="foot">
                  <span class="tinyDot"></span><span>Live</span>
                </div>
              </div>

              <!-- Current -->
              <div class="gauge">
                <div class="gTop">
                  <b>Current</b><span class="mini">0‚Äì50A</span>
                </div>
                <div class="ringWrap">
                  <svg class="ringSvg" viewBox="0 0 100 100" aria-hidden="true">
                    <circle
                      class="base rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                    ></circle>
                    <circle
                      id="iArc"
                      class="arc rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                      stroke-linecap="round"
                      stroke-dasharray="239"
                      stroke-dashoffset="239"
                    ></circle>
                  </svg>
                  <div class="gVal">
                    <div class="num" id="iNum">0.00</div>
                    <div class="unit">A</div>
                  </div>
                </div>
                <div class="foot">
                  <span class="tinyDot"></span><span>Live</span>
                </div>
              </div>

              <!-- Capacitance -->
              <div class="gauge">
                <div class="gTop">
                  <b>Capacitance</b
                  ><span class="mini" id="capRange">0‚Äì20mF</span>
                </div>
                <div class="ringWrap">
                  <svg class="ringSvg" viewBox="0 0 100 100" aria-hidden="true">
                    <circle
                      class="base rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                    ></circle>
                    <circle
                      id="cArc"
                      class="arc rot"
                      cx="50"
                      cy="50"
                      r="38"
                      stroke-width="8"
                      fill="none"
                      stroke-linecap="round"
                      stroke-dasharray="239"
                      stroke-dashoffset="239"
                    ></circle>
                  </svg>
                  <div class="gVal">
                    <div class="num" id="cNum">0.00</div>
                    <div class="unit">mF</div>
                  </div>
                </div>
                <div class="foot">
                  <span class="tinyDot"></span><span>Live</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- BOTTOM-RIGHT: THERMALS -->
        <section class="card" aria-label="Thermals">
          <div class="card-inner">
            <div class="head">
              <div class="title">
                <svg
                  class="ico"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2.2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  aria-hidden="true"
                  style="color: var(--err)"
                >
                  <path d="M10 14.5V5a2 2 0 0 1 4 0v9.5a4 4 0 1 1-4 0z"></path>
                </svg>
                <div>
                  <h3>Thermals</h3>
                  <div class="subtitle">4 temperature channels</div>
                </div>
              </div>
            </div>

            <div class="thermGrid" id="thermGrid"></div>
          </div>
        </section>
      </main>
    </div>

    <script>
      /* -----------------------------
         CONFIG (match your ranges)
      ------------------------------ */
      const MAX_VOLT = 325; // V
      const MAX_CURR = 50; // A
      const MAX_CAP_MF = 20; // mF
      document.getElementById("capRange").textContent = `0‚Äì${MAX_CAP_MF}mF`;

      /* -----------------------------
         CLOCK
      ------------------------------ */
      const dowEl = document.getElementById("dow");
      const dateEl = document.getElementById("date");
      const timeEl = document.getElementById("time");

      const pad = (n) => String(n).padStart(2, "0");

      function tickClock() {
        const d = new Date();
        dowEl.textContent = d.toLocaleDateString(undefined, {
          weekday: "long",
        });
        dateEl.textContent = d.toLocaleDateString(undefined, {
          year: "numeric",
          month: "short",
          day: "2-digit",
        });
        timeEl.textContent = `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;

        const h = (d.getHours() % 12) + d.getMinutes() / 60;
        const m = d.getMinutes() + d.getSeconds() / 60;
        const s = d.getSeconds();

        document
          .getElementById("hHand")
          .setAttribute("transform", `rotate(${h * 30} 60 60)`);
        document
          .getElementById("mHand")
          .setAttribute("transform", `rotate(${m * 6} 60 60)`);
        document
          .getElementById("sHand")
          .setAttribute("transform", `rotate(${s * 6} 60 60)`);
      }
      tickClock();
      setInterval(tickClock, 1000);

      /* -----------------------------
         SYSTEM STATUS (mock)
         Replace with your /monitor mapping later
      ------------------------------ */
      let systemState = {
        ready: true,
        mode: "Off", // Off / Running / Error
        calibrationPending: true,
        ledFeedback: true,
      };

      const readyTxt = document.getElementById("readyTxt");
      const modeTxt = document.getElementById("modeTxt");
      const calTxt = document.getElementById("calTxt");

      const ledReady = document.getElementById("ledReady");
      const ledMode = document.getElementById("ledMode");
      const ledCal = document.getElementById("ledCal");

      function renderSystem() {
        readyTxt.textContent = systemState.ready ? "Ready" : "Not Ready";
        modeTxt.textContent = systemState.mode;
        calTxt.textContent = systemState.calibrationPending
          ? "Cal Pending"
          : "Cal OK";

        ledReady.className = "led " + (systemState.ready ? "ok" : "err");

        ledMode.className =
          "led " +
          (systemState.mode === "Running"
            ? "ok"
            : systemState.mode === "Off"
              ? "err"
              : "err");

        ledCal.className =
          "led " + (systemState.calibrationPending ? "warn" : "ok");

        document.getElementById("ledFeedback").checked =
          !!systemState.ledFeedback;
      }
      renderSystem();

      document.getElementById("ledFeedback").addEventListener("change", (e) => {
        systemState.ledFeedback = e.target.checked;
        console.log("LED Feedback:", systemState.ledFeedback);
      });

      /* -----------------------------
         NOTIFICATIONS (mock)
      ------------------------------ */
      const noticeList = document.getElementById("noticeList");
      const notices = [
        {
          tag: "warn",
          title: "Calibration pending",
          desc: "Device needs calibration before running the loop.",
        },
        {
          tag: "ok",
          title: "Wi-Fi connected",
          desc: "Station mode active. Signal stable.",
        },
        {
          tag: "err",
          title: "Output 4 not detected",
          desc: "No wire / open circuit detected on output 4.",
        },
      ];

      function renderNotices() {
        noticeList.innerHTML = "";
        notices.forEach((n) => {
          const el = document.createElement("div");
          el.className = "notice";
          el.innerHTML = `
            <div class="left">
              <div class="t">${n.title}</div>
              <div class="d">${n.desc}</div>
            </div>
            <div class="tag ${n.tag}">${n.tag.toUpperCase()}</div>
          `;
          noticeList.appendChild(el);
        });
      }
      renderNotices();

      document.getElementById("btnOpenSetup").onclick = () =>
        alert("Open Setup (mock)");
      document.getElementById("btnCalibration").onclick = () =>
        alert("Calibration (mock)");
      document.getElementById("btnLogs").onclick = () => alert("Logs (mock)");

      /* -----------------------------
         GAUGES
      ------------------------------ */
      const vNum = document.getElementById("vNum");
      const iNum = document.getElementById("iNum");
      const cNum = document.getElementById("cNum");

      const vArc = document.getElementById("vArc");
      const iArc = document.getElementById("iArc");
      const cArc = document.getElementById("cArc");

      // circumference for r=38 -> ~238.76
      const C = 2 * Math.PI * 38;

      function setGaugeArc(el, value, min, max) {
        const t = Math.max(0, Math.min(1, (value - min) / (max - min)));
        el.setAttribute("stroke-dasharray", C.toFixed(1));
        el.setAttribute("stroke-dashoffset", (C * (1 - t)).toFixed(1));
      }

      function mockElectrical() {
        // Replace these with your real monitor values
        const v = Math.max(0, Math.min(MAX_VOLT, 280 + Math.random() * 45)); // ~280..325
        const i = Math.max(0, Math.min(MAX_CURR, Math.random() * 12)); // 0..12A
        const c = Math.max(0, Math.min(MAX_CAP_MF, 5 + Math.random() * 8)); // 5..13mF

        vNum.textContent = v.toFixed(1);
        iNum.textContent = i.toFixed(2);
        cNum.textContent = c.toFixed(2);

        setGaugeArc(vArc, v, 0, MAX_VOLT);
        setGaugeArc(iArc, i, 0, MAX_CURR);
        setGaugeArc(cArc, c, 0, MAX_CAP_MF);
      }
      mockElectrical();
      setInterval(mockElectrical, 1200);

      /* -----------------------------
         THERMALS (4 sensors)
      ------------------------------ */
      const therms = [
        { name: "Board 01", value: 21.69 },
        { name: "Board 02", value: 21.0 },
        { name: "Heatsink", value: 20.94 },
        { name: "Temp 4", value: null }, // null = Off
      ];

      const thermGrid = document.getElementById("thermGrid");

      function smallArcDash(value, min, max) {
        const r = 30;
        const circ = 2 * Math.PI * r;
        const t = Math.max(0, Math.min(1, (value - min) / (max - min)));
        const filled = circ * t;
        return { circ, dashoffset: circ - filled };
      }

      function renderThermals() {
        thermGrid.innerHTML = "";
        therms.forEach((t) => {
          const off = t.value === null;
          const valTxt = off ? "Off" : `${t.value.toFixed(2)}¬∞C`;
          const arc = off
            ? { circ: 2 * Math.PI * 30, dashoffset: 2 * Math.PI * 30 }
            : smallArcDash(t.value, 0, 80);

          const box = document.createElement("div");
          box.className = "therm";
          box.innerHTML = `
            <div class="tRing" aria-hidden="true">
              <svg viewBox="0 0 100 100">
                <circle class="base rot" cx="50" cy="50" r="30" stroke-width="8" fill="none"></circle>
                <circle class="arc rot" cx="50" cy="50" r="30"
                  stroke-width="8" fill="none" stroke-linecap="round"
                  stroke-dasharray="${arc.circ.toFixed(1)}"
                  stroke-dashoffset="${arc.dashoffset.toFixed(1)}"
                  style="opacity:${off ? 0.35 : 1}"></circle>
              </svg>
              <span class="tDot" style="opacity:${off ? 0.35 : 0.9}"></span>
            </div>
            <div class="tval">${valTxt}</div>
            <div class="label">${t.name}</div>
          `;
          thermGrid.appendChild(box);
        });
      }
      renderThermals();
    </script>
  </body>
</html>
