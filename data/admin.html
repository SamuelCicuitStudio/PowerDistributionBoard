<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="css/admin.css?v=2" />
    <style>
      .user-status-global {
        position: absolute;
        top: 10px;
        right: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 1000;
      }
      .user-menu {
        position: absolute;
        top: 35px;
        right: 0;
        display: none;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 8px;
        padding: 10px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
      }
      .user-menu button {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
      }

      /* === Device Settings: scoped, compact, no vertical scroll === */
      #deviceSettingsTab.content,
      #deviceSettingsTab .content {
        /* in case a theme sets scroll on .content, force this tab to fit */
        padding: 14px 18px 10px;
        overflow-y: hidden;
      }

      /* Make the single box fill available width and fit the frame height */
      .user-modal-content.device-settings-box {
        width: 100%; /* override any base 300px width */
        max-width: 620px; /* fits in 820px frame with sidebar/padding */
        max-height: 460px; /* stays inside content area */
        display: flex;
        flex-direction: column; /* grid + actions stacked */
        gap: 14px;
      }

      /* Two-column grid inside the box */
      .device-settings-box .device-grid {
        display: grid;
        grid-template-columns: 1fr 1fr; /* left: device fields | right: nichrome */
        gap: 16px 24px; /* row gap | column gap */
        align-items: start;
        min-width: 0;
      }

      .device-settings-box .device-col {
        display: flex;
        flex-direction: column;
        gap: 8px;
        min-width: 0;
      }

      .device-settings-box h3 {
        margin: 0 0 8px;
      }

      /* Inputs with right-side unit tag */
      .input-with-unit {
        position: relative;
      }
      .input-with-unit input {
        width: 100%;
        padding-right: 42px; /* space for unit */
      }
      .unit-label {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 12px;
        opacity: 0.75;
        pointer-events: none;
      }

      /* Nichrome calibration grid: 5 x 2 for R01..R10 + 1 full-width target row */
      .nichrome-grid {
        display: grid;
        grid-template-columns: repeat(5, minmax(0, 1fr));
        gap: 10px 12px;
      }
      .nichrome-grid .field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .nichrome-grid .field label {
        font-size: 11px;
        opacity: 0.85;
      }
      .nichrome-grid .field input {
        padding: 8px;
      }
      .nichrome-grid .field.target {
        grid-column: 1 / -1; /* span entire row */
      }

      /* Actions always visible and tidy */
      .device-settings-box .user-modal-actions.round-actions {
        margin-top: 8px;
        justify-content: center;
      }

      /* Optional: tiny responsive fallback if viewport is very short or narrow */
      @media (max-height: 640px) {
        .user-modal-content.device-settings-box {
          max-height: 440px;
        }
      }
      @media (max-width: 980px) {
        .user-modal-content.device-settings-box {
          max-width: 600px;
        }
      }
      @media (max-width: 860px) {
        .device-settings-box .device-grid {
          grid-template-columns: 1fr; /* stack columns on very narrow view */
        }
      }
    </style>
  </head>
  <body>
    <div class="ui-container">
      <!-- Global User Icon / Menu -->
      <div class="user-status-global">
        <div class="status-dot" title="Auto Mode"></div>
        <div class="user-icon" onclick="toggleUserMenu()">ðŸ‘¤</div>
        <div class="user-menu" id="userMenu">
          <button id="disconnectBtn" type="button">Disconnect</button>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <div class="tab active" onclick="switchTab(0)">Dashboard</div>
        <div class="tab" onclick="switchTab(1)">User Settings</div>
        <div class="tab" onclick="switchTab(2)">Manual Control</div>
        <div class="tab" onclick="switchTab(3)">Admin Settings</div>
        <div class="tab" onclick="switchTab(4)">Device Settings</div>
        <div class="tab" onclick="switchTab(5)">Live</div>

        <!-- SINGLE vertical stack of 4 buttons -->
        <div class="sidebar-controls-vertical">
          <!-- 1) Mute -->
          <div
            class="round-button mute"
            id="muteBtn"
            onclick="toggleMute()"
            title="Mute / Unmute"
          >
            <img id="muteIcon" src="icons/volume-up-4-256.png" alt="Sound" />
          </div>

          <!-- 2) Power -->
          <button id="powerButton" class="power-button state-off" title="Power">
            <span class="ring"></span>
            <span class="label" id="powerLabel">OFF</span>
          </button>

          <!-- 3) Reboot -->
          <div
            class="round-button reset"
            onclick="rebootSystem()"
            title="Reboot"
          >
            <img src="icons/refresh.png" alt="Reset" />
          </div>

          <!-- 4) Reset -->
          <div
            class="round-button reset"
            onclick="openConfirm('reset')"
            title="Reset"
          >
            <img src="icons/redo-5-16.png" alt="Reset" />
          </div>
        </div>
      </div>

      <!-- Dashboard Tab -->
      <div class="content active" id="dashboardTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div
          class="mode-box"
          style="
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.05);
          "
        >
          <div
            class="mode-toggle"
            style="
              display: flex;
              align-items: center;
              gap: 15px;
              flex-wrap: wrap;
            "
          >
            <label>Auto</label>
            <label class="switch">
              <input type="checkbox" id="modeToggle" onchange="toggleMode()" />
              <span class="slider"></span>
            </label>
            <label>Manual</label>

            <label style="margin-left: 20px">LT</label>
            <label class="switch">
              <input type="checkbox" id="ltToggle" onchange="toggleLT()" />
              <span class="slider"></span>
            </label>

            <span style="margin-left: 30px">Ready</span>
            <div id="readyLed" class="led"></div>
            <span style="margin-left: 20px">OFF</span>
            <div id="offLed" class="led"></div>
          </div>
        </div>

        <div class="gauge-scroll-area">
          <div class="gauges">
            <!-- Voltage -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg voltage"
                      stroke-dasharray="92, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="voltageValue"
                  >
                    230V
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Voltage</div>
            </div>

            <!-- Current -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg current"
                      stroke-dasharray="60, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="currentValue"
                  >
                    1.2A
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Current</div>
            </div>

            <!-- Temp 1 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 
                          a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="21, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 
                          a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp1Value"
                  >
                    31Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 1</div>
            </div>

            <!-- Temp 2 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="17, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp2Value"
                  >
                    25Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 2</div>
            </div>

            <!-- Temp 3 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="26, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp3Value"
                  >
                    39Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 3</div>
            </div>

            <!-- Temp 4 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="29, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp4Value"
                  >
                    44Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 4</div>
            </div>

            <!-- Temp 5 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="19, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp5Value"
                  >
                    28Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 5</div>
            </div>

            <!-- Temp 6 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="24, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp6Value"
                  >
                    36Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 6</div>
            </div>

            <!-- Temp 7 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="14, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp7Value"
                  >
                    22Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 7</div>
            </div>

            <!-- Temp 8 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="32, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp8Value"
                  >
                    48Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 8</div>
            </div>

            <!-- Temp 9 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="18, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp9Value"
                  >
                    27Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 9</div>
            </div>

            <!-- Temp 10 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="22, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp10Value"
                  >
                    33Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 10</div>
            </div>

            <!-- Temp 11 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="27, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp11Value"
                  >
                    41Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 11</div>
            </div>

            <!-- Temp 12 -->
            <div class="gauge-card">
              <div class="gauge">
                <svg viewBox="0 0 36 36" class="gauge-svg">
                  <g transform="rotate(-90 18 18)">
                    <path
                      class="gauge-bg"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                    <path
                      class="gauge-fg temperature"
                      stroke-dasharray="19, 100"
                      d="M18 2.0845 a15.9155 15.9155 0 1 1 0 31.831 a15.9155 15.9155 0 1 1 0 -31.831"
                    />
                  </g>
                  <text
                    x="18"
                    y="18"
                    class="gauge-value"
                    transform="rotate(90 18 18)"
                    id="temp12Value"
                  >
                    29Â°C
                  </text>
                </svg>
              </div>
              <div class="gauge-label">Temp 12</div>
            </div>
          </div>
        </div>
      </div>

      <!-- User Settings Tab -->
      <div class="content" id="userSettingsTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div
          class="user-modal-content zoom-box"
          style="width: 100%; max-width: 400px"
        >
          <input
            type="password"
            id="userCurrentPassword"
            placeholder="Current Password"
          />
          <input
            type="password"
            id="userNewPassword"
            placeholder="New Password"
          />
          <input type="text" id="userDeviceId" placeholder="New Device ID" />
          <div class="user-modal-actions round-actions">
            <div class="round-button save" onclick="saveUserSettings()">
              <img src="icons/ok_tank.png" alt="Save" />
            </div>
            <div class="round-button cancel" onclick="resetUserSettings()">
              <img src="icons/close.png" alt="Cancel" />
            </div>
          </div>
        </div>

        <div class="section-header">Output Access</div>
        <div class="manual-outputs" id="userAccessGrid"></div>
      </div>

      <!-- Manual Control Tab -->
      <div class="content" id="manualControlTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div class="mode-box">
          <div
            class="controls"
            style="
              display: flex;
              align-items: center;
              gap: 20px;
              flex-wrap: wrap;
            "
          >
            <label>Fan</label>
            <input type="range" min="0" max="100" id="fanSlider" />
            <label>Relay</label>
            <label class="switch">
              <input type="checkbox" id="relayToggle" />
              <span class="slider"></span>
            </label>
            <label>Bypass</label>
            <label class="switch">
              <input type="checkbox" id="bypassToggle" />
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <div class="manual-outputs" id="manualOutputs"></div>
      </div>

      <!-- Admin Settings Tab -->
      <div class="content" id="adminSettingsTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            height: calc(100% - 80px);
          "
        >
          <div
            class="user-modal-content zoom-box"
            style="width: 100%; max-width: 400px"
          >
            <input
              type="password"
              id="adminCurrentPassword"
              placeholder="Current Password"
            />
            <input
              type="text"
              id="adminUsername"
              placeholder="New Admin Username"
            />
            <input
              type="password"
              id="adminPassword"
              placeholder="New Admin Password"
            />

            <hr style="margin: 20px 0; opacity: 0.2" />

            <input type="text" id="wifiSSID" placeholder="Wi-Fi SSID" />
            <input
              type="password"
              id="wifiPassword"
              placeholder="Wi-Fi Password"
            />

            <div class="user-modal-actions round-actions">
              <div class="round-button save" onclick="saveAdminSettings()">
                <img src="icons/ok_tank.png" alt="Save" />
              </div>
              <div class="round-button cancel" onclick="resetAdminSettings()">
                <img src="icons/close.png" alt="Cancel" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Device Settings Tab -->
      <div class="content" id="deviceSettingsTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            height: calc(100% - 80px);
          "
        >
          <!-- Device Settings: ONE SINGLE BOX -->
          <div class="user-modal-content zoom-box device-settings-box">
            <div class="device-grid">
              <!-- Left column: existing device fields -->
              <section class="device-col">
                <h3>Device Settings</h3>

                <div class="input-with-unit">
                  <input
                    type="number"
                    id="desiredVoltage"
                    placeholder="Desired Output Voltage"
                  />
                  <span class="unit-label">V</span>
                </div>

                <div class="input-with-unit">
                  <input
                    type="number"
                    id="acFrequency"
                    placeholder="AC Frequency"
                  />
                  <span class="unit-label">Hz</span>
                </div>

                <div class="input-with-unit">
                  <input
                    type="number"
                    id="chargeResistor"
                    placeholder="Charge Resistor"
                  />
                  <span class="unit-label">Î©</span>
                </div>

                <div class="input-with-unit">
                  <input
                    type="number"
                    id="dcVoltage"
                    placeholder="DC Output Voltage"
                  />
                  <span class="unit-label">V</span>
                </div>

                <div class="input-with-unit">
                  <input type="number" id="onTime" placeholder="ON Time" />
                  <span class="unit-label">ms</span>
                </div>

                <div class="input-with-unit">
                  <input type="number" id="offTime" placeholder="OFF Time" />
                  <span class="unit-label">ms</span>
                </div>
              </section>

              <!-- Right column: Nichrome Calibration -->
              <section class="device-col">
                <h3>Nichrome Calibration</h3>
                <div class="nichrome-grid">
                  <!-- R01..R10 -->
                  <div class="field">
                    <label for="r01ohm">R01 (Î©)</label>
                    <input
                      id="r01ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r02ohm">R02 (Î©)</label>
                    <input
                      id="r02ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r03ohm">R03 (Î©)</label>
                    <input
                      id="r03ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r04ohm">R04 (Î©)</label>
                    <input
                      id="r04ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r05ohm">R05 (Î©)</label>
                    <input
                      id="r05ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r06ohm">R06 (Î©)</label>
                    <input
                      id="r06ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r07ohm">R07 (Î©)</label>
                    <input
                      id="r07ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r08ohm">R08 (Î©)</label>
                    <input
                      id="r08ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r09ohm">R09 (Î©)</label>
                    <input
                      id="r09ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                  <div class="field">
                    <label for="r10ohm">R10 (Î©)</label>
                    <input
                      id="r10ohm"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>

                  <!-- Target for all -->
                  <div class="field target">
                    <label for="rTarget">Target Resistance (Î©)</label>
                    <input
                      id="rTarget"
                      type="number"
                      step="0.1"
                      inputmode="decimal"
                    />
                  </div>
                </div>
              </section>
            </div>

            <!-- One shared action row -->
            <div class="user-modal-actions round-actions">
              <div class="round-button save" onclick="saveDeviceAndNichrome()">
                <img src="icons/ok_tank.png" alt="Save" />
              </div>
              <div
                class="round-button cancel"
                onclick="resetDeviceAndNichrome()"
              >
                <img src="icons/close.png" alt="Cancel" />
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- New Live tab (place near the end of content panels) -->
      <div class="content" id="liveTab">
        <div class="content-header">
          <h2></h2>
        </div>

        <div class="live-wrap">
          <div class="live-stage">
            <!-- Backgroundless board in /icons as you said -->
            <img src="icons/board.png" alt="Board" />

            <!-- SVG overlay draws traces + dots; viewBox=percent units -->
            <svg
              class="live-overlay"
              viewBox="0 0 100 100"
              preserveAspectRatio="none"
            ></svg>
          </div>

          <div class="live-legend">
            <span class="chip red"></span> AC input
            <span class="chip yellow"></span> Input relay
            <span class="chip cyan"></span> Outputs 1â€“10
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">&copy; 2025 Power Distribution Admin Interface</div>
    </div>
    <!-- enable/disable: set window.USE_MOCK=true/false before mock.js -->
    <script>
      window.USE_MOCK = false;
    </script>
    <script src="js/mock.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/admin.js?v=2"></script>
    <!-- Confirm dialog -->
    <div id="confirmModal" class="user-modal" style="display: none">
      <div
        class="user-modal-content zoom-box"
        style="max-width: 380px; text-align: center"
      >
        <h3 id="confirmTitle">Confirm Action</h3>
        <p id="confirmMessage">Are you sure?</p>

        <div class="user-modal-actions">
          <button id="confirmCancelBtn">Cancel</button>
          <button id="confirmOkBtn" class="danger">Yes, do it</button>
        </div>
      </div>
    </div>
  </body>
</html>
